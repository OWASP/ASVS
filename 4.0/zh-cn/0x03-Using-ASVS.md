 # 使用ASVS

ASVS有两个主要目标：

* 帮助组织开发和维护安全的应用程序。
* 允许安全服务厂商、安全工具供应商和消费者调整他们的要求和产品。

## 应用安全验证级别

应用程序安全验证标准（ASVS）定义了三个安全验证级别，每个级别的深度都在增加。 

* ASVS Level 1 适用于低保证级别，可通过渗透测试验证。
* ASVS Level 2 适用于包含敏感数据的应用程序（需要保护），是大多数应用程序的推荐级别。
* ASVS Level 3 适用于最关键的应用程序：执行高价值交易、包含敏感医疗数据的应用程序，或任何需要最高级别信任的应用程序。

每个ASVS级别都包含一个安全要求的列表。其中的每一项，都可以对应到开发人员必须在软件中建立的特定安全特性和功能。

![ASVS Level](https://raw.githubusercontent.com/OWASP/ASVS/master/4.0/images/asvs_40_levels.png "ASVS Level")

图1 - OWASP应用安全验证标准4.0级别

Level 1 是唯一可以由人类进行渗透测试的级别。 所有其他的等级都需要接触文档、源代码、配置以及开发人员。 然而，即使L1允许通过“黑盒”（无文档和无源代码）测试来验证，但它并不是有效的保证活动，应尽量避免单独采用。 恶意攻击者有大量的时间，但大多数渗透测试在几周内就会结束。 防御者需要在合理的时间内，建立安全控制，发现、解决和保护所有的弱点，检测和应对恶意攻击者。恶意攻击者的时间基本上是无限的，只需要一处漏洞，或者一个缺少检测的弱点就可以成功。 黑盒测试，通常在开发结束时快速执行，或者根本不执行，完全无法应对这种不对称性。

在过去的 30 多年里，黑盒测试一次又一次被证明会遗漏关键的安全问题，直接导致了越来越多的大规模漏洞。 我们强烈鼓励使用广泛的安全保证和验证，包括用 Level 1 的源代码主导的（混合）渗透测试来取代渗透测试，在整个开发过程中可以充分接触到开发人员和文档。 金融监管机构不会容忍“无法接触账本、交易样本或执行控制的人员”的外部财务审计。 行业和政府必须要求软件工程领域具有相同的透明度标准。

我们强烈鼓励在开发过程中使用安全工具。 构建管道可以持续使用 DAST 和 SAST 工具，来查找容易发现的、不应该出现的安全问题。

在没有人工协助的情况下，ASVS中超过半数的验证项无法被自动化工具和在线扫描完成。 如果需要对每次构建进行全面的自动化测试，则使用自定义单元和集成测试的组合，以及由构建发起的在线扫描。 业务逻辑缺陷和访问控制测试只能使用人工协助。 这些内容应该变成单元和集成测试。

## 如何使用这个标准

使用应用程序安全验证标准（ASVS）的最佳方法之一，是将其作为一个蓝图，创建一个针对您的应用程序、平台或组织的安全编码检查表。 建议您根据不同的项目场景，针对其中最重要的安全要求，在定制的ASVS中增加关注。

### Level 1 - 第一步，自动化，或全景图

如果一个应用程序能够充分防御 OWASP Top10 或其他类似检查表中提到的那些容易发现的安全漏洞，那么它就达到了ASVS Level 1。

Level 1，是所有应用程序应争取的最低限度。 作为多个阶段工作的第一步，或是当应用程序不存储或处理敏感数据，因此不需要L2或L3的更严格的控制时，它也是有用的。 Level 1控制可以通过工具自动检查，也可以在不访问源代码的情况下简单地手动检查。我们认为Level 1是所有应用程序的最低要求。

对应用程序的威胁，往往来自那些使用简单、省力的技术来识别“简单漏洞”的攻击者。 这与坚定的攻击者形成对比，后者将花费集中的精力专门针对应用程序。 如果您的应用程序处理的数据具有很高的价值，您很少会止步于Level 1。

### Level 2 - 大多数应用程序

如果一个应用程序能够充分抵御当今与软件相关的大多数风险，那么它就达到了ASVS Level 2（级别或标准）。

Level 2 确保安全控制在应用程序中得到有效的落实。 Level 2 通常适用于处理重要B2B事务（B2B，Business-to-Business）的应用程序， 包括处理医疗保健信息、实施关键业务、实现敏感功能、或处理敏感资产的应用程序，或完整性是保护其业务的关键方面的行业，例如打击游戏外挂和作弊的游戏行业。

对 Level 2 应用程序的威胁，通常是熟练的和有动机的攻击者，他们专注于特定的目标，使用工具和技术有效地发现和利用应用程序中的风险。

### Level 3 - 高价值、高保证或高安全性

ASVS Level 3，是 ASVS 内的最高级别验证。 这个级别通常保留给需要大量安全验证的应用，例如军事、健康、安全和关键基础设施等领域的应用。

对于执行关键功能的应用程序，组织可能需要 ASVS Level 3，在这种情况下，故障可能会严重影响组织的运作，甚至影响其生存。下面提供了有关 ASVS 3Level 3应用的示例指导。 如果一个应用程序能够充分防御高级应用程序的安全漏洞，并显示出良好的安全设计原则，那么它就达到了ASVS Level 3（或高级）。

与其他级别相比，ASVS Level 3 的应用程序需要对架构、编码和测试进行更深入的分析。 安全的应用程序以有意义的方式模块化的（以促进弹性，可扩展性，以及最重要的安全层），每个由网络连接和/或物理实例分开的模块，负责自己纵深防御的安全职责，这需要适当的记录。 职责包括确保机密性（例如加密）、完整性（例如事务、输入验证）、可用性（例如优雅地处理负载）、身份验证（包括系统之间）、授权和审计（日志记录）的控制。

## 在实践中应用ASVS

不同的威胁有不同的动机。某些行业有独特的信息和技术资产，以及特定领域的监管要求。

我们强烈建议，各组织根据其业务性质，深入研究其独特的风险特征，并根据该风险和业务要求，确定适当的ASVS级别。

## 如何引用ASVS要求

每个需求都有一个标识符，格式为 `<章>.<节>.<要求>` ，每个元素都是一个数字，例如：`1.11.3` 。
- `<chapter>` 值对应于需求出现的章，例如：所有 `1.#.#` 的需求都来自`Architecture`这一章。
- `<section>` 值对应于该章中需求出现的小节，例如：所有 `1.11.#` 需求都在 `Architecture` 章的 `Business Logic Architecture` 部分。
- `<requirement>`值对应该章的具体要求，例如：本标准的4.0.3版本中的 `1.11.3` 是：

> 验证所有高价值业务逻辑流（包括身份验证、会话管理和访问控制）都是线程安全的，并且可以防止“检查时间和使用时间不一致”导致的条件竞争问题。

标识符可能会在标准版本之间发生变化，因此在其他文档、报告或工具最好使用以下格式： `v<version>-<chapter>.<section>.<requirement>` ，其中：“version”是 ASVS 版本标签。 例如：`v4.0.3-1.11.3` 将被理解为特指版本 4.0.3 中“架构”这一章中“业务逻辑架构”这一节的第 3 项要求。 （可概括为`v<version>-<requirement_identifier>`。）

注意：版本部分前面的 `v` 要小写。

如果使用不包括 `v<version>` 的标识符，那么它们应该被认为是指最新的应用安全验证标准内容。显然，随着标准的增长和变化，这将导致问题，这就是为什么作者或开发者应该将版本包括进去。

ASVS 需求列表，以 CSV、JSON 和其他可能对参考或编程有用的格式提供。