# استخدام ASVS

لـ ASVS هدفين رئيسيين:

* مساعدة المنظمات على تطوير وصيانة تطبيقات آمنة.
* إتاحة التوافق بين المتطلبات لبائعي خدمات أمن المعلومات، وبائعي أدوات أمن المعلومات، والمستهلكين للتوافق مع متطلباتهم وعروضهم.

## مستويات التحقق من أمان التطبيقات

يحدد معيار التحقق من أمان التطبيقات ثلاثة مستويات للتحقق من الأمان، تزداد المتطلبات مع الانتقال بين المستويات للأعلى.

* المستوى 1 من المعيار هو لمستويات أمان منخفضة، وهو قابل لاختبارات الاختراق بشكل كامل.
* المستوى 2 من المعيار هو للتطبيقات التي تتضمن بيانات حساسة والتي تتطلب حماية وهو المستوى المقترح لمعظم التطبيقات.
* المستوى 3 من المعيار وهو للتطبيقات الأكثر أهمية – التطبيقات التي تقوم بتنفيذ أعمال عالية القيمة ، أو تتضمن بيانات طبية حساسة، أو أي تطبيق يتطلب أعلى مستوى من الثقة.

يتضمن كل مستوى من مستويات ASVS قائمة من متطلبات الأمان. يمكن أيضاً تعيين كل متطلب من هذه المتطلبات إلى إمكانيات وميزات أمان خاصة والتي يجب على المطورين أن يقوموا ببنائها في البرنامج.

![ASVS Levels](https://raw.githubusercontent.com/OWASP/ASVS/master/4.0/images/asvs_40_levels.png "ASVS Levels")

الشكل 1 - مستويات معيار OWASP للتحقق من أمان التطبيقات 4.0

المستوى 1 هو المستوى الوحيد القابل لاختبارات الاختراق بشكل كامل عن طريق العامل البشري. تتطلب بقية المستويات الوصول إلى الوثائق والشيفرة المصدرية والتكوين configuration والأشخاص المشاركين في عملية التطوير. ومع ذلك ، حتى لو سمحت L1 بإجراء اختبار "الصندوق الأسود" (بدون توثيق ولا شيفرة مصدرية) ، فهو إجراء غير فعال ولا يجب التشجيع على ممارسته. فالمهاجمين يمتلكون متسعاً من الوقت، أما اختبارات الاختراق تنتهي معظمها في غضون أسبوعين. يحتاج المسؤولين عن الحماية إلى بناء ضوابط أمنية، والحماية من نقاط الضعف والعثور عليها وحلها ، واكتشاف الجهات الفاعلة الضارة والرد عليها في وقت مناسب. بشكل أساسي لدى الجهات الفاعلة الضارة وقتًا غير محدود ولا تحتاج إلا لنقطة ضعف واحدة أو غياب ميزة كشف لنجاح أعمالها الضارة. إن اختبار الصندوق الأسود الذي يتم إجراؤه في نهاية التطوير بشكل سريع - أو لا يتم إجراؤه على الإطلاق - غير قادر بشكل تام على مواجهة ذلك.

على مدار الثلاثين عامًا الماضية ، أثبت اختبار الصندوق الأسود مرارًا وتكرارًا أنه لا يغطي مشكلات الأمان الحرجة التي تؤدي مباشرة إلى المزيد من الانتهاكات الهائلة. نحن نشجع بشدة على استخدام مجموعة واسعة من ضمانات الأمان والتحقق ، بما في ذلك استبدال اختبارات الاختراق باختبارات اختراق (هجينة) موجهة بالشيفرة المصدرية penetration tests with source code led في المستوى 1 ، مع إمكانية الوصول الكامل إلى المطورين والوثائق طوال عملية التطوير. لا يتسامح المنظمون الماليون مع عمليات التدقيق المالي الخارجية دون الوصول إلى الدفاتر ، أو المعاملات النموذجية ، أو الأشخاص الذين يقومون بالرقابة. يجب أن تطالب الصناعة والحكومات بنفس معيار الشفافية في مجال هندسة البرمجيات.

نحن نشجع بشدة على استخدام أدوات الأمان في عملية التطوير نفسها. يمكن استخدام أدوات DAST و SAST بشكل مستمر للعثور بسهولة على مشكلات الأمان التي يجب ألا تكون موجودة أبدًا.

إن الأدوات المؤتمتة automated tools وعمليات الفحص عبر الإنترنت online scan غير قادرة على إكمال أكثر من نصف ASVS دون تدخل العامل البشري. إذا كانت هناك حاجة إلى أتمتة اختبار شامل لكل build ، فسيتم استخدام مجموعة من اختبارات الوحدة والتكاملunit and integration tests جنبًا إلى جنب مع عمليات الفحص عبر الإنترنت. أما عيوب منطق الأعمال Business logic flaws واختبار التحكم في الوصول access control testing  فهي ممكنة فقط عن طريق العامل البشري. ولذلك يجب تحويلها إلى unit and integration tests.

## كيفية استخدام هذا المعيار

واحدة من أفضل الطرق لاستخدام معيار التحقق من أمان التطبيقات هي استخدامه كمخطط عمل لإنشاء قائمة تحقق checklist لكتابة شيفرة مصدرية آمنة، هذه القائمة هي خاصة بتطبيقك أو منصتك أو مؤسستك. سيؤدي استخدام ASVS مع الـuse cases  الخاصة بك إلى زيادة التركيز على متطلبات الأمان الأكثر أهمية لمشاريعك وبيئاتك.

### المستوى 1: الخطوات الأولى، مؤتمت، أو استعراض المحفظة بشكل كامل

يحقق التطبيق المستوى 1 من ASVS إذا كان يحمي بشكل كاف من الثغرات الأمنية للتطبيقات التي يسهل اكتشافها، وتم تضمينها في OWASP – العشر الأوائل وقوائم التحقق الأخرى المماثلة.

المستوى 1 هو الحد الأدنى الذي يجب أن تسعى جميع التطبيقات لتحقيقه. كما أنه مفيد كخطوة أولى في جهد متعدد المراحل أو عندما لا تخزن التطبيقات البيانات الحساسة أو تتعامل معها ، وبالتالي لا تحتاج إلى ضوابط أكثر صرامة كالضوابط في المستوى 2 أو 3. يمكن التحقق من ضوابط المستوى 1 إما آلياً بواسطة الأدوات المؤتمتة أو ببساطة يدويًا دون الوصول إلى الشيفرة المصدرية. نحن نعتبر المستوى 1 هو الحد الأدنى المطلوب لجميع التطبيقات.

من المرجح أن تكون التهديدات التي يتعرض لها التطبيق من المهاجمين الذين يستخدمون تقنيات بسيطة ومنخفضة الجهد لتحديد نقاط الضعف التي يسهل العثور عليها واستغلالها. هذا على عكس المهاجم الذي سيبذل جهود كبيرة ومركزة لاستهداف التطبيق على وجه التحديد. إذا كانت البيانات التي تتم معالجتها بواسطة التطبيق الخاص بك ذات قيمة عالية ، فنادراً ما ترغب في التوقف عند مراجعة المستوى 1.

### المستوى2:  معظم التطبيقات

يحقق التطبيق المستوى 2 (أو القياسي) من ASVS إذا كان يحمي بشكل كاف من معظم المخاطر المرتبطة بالبرنامج اليوم.

يضمن المستوى 2 أن ضوابط الأمان مطبقة وفعالة ومستخدمة داخل التطبيق. عادةً ما يكون المستوى 2 مناسبًا للتطبيقات التي تتعامل مع المعاملات  transactions الهامة بين الشركات ، بما في ذلك تلك التي تعالج معلومات الرعاية الصحية ، أو تنفذ وظائف مهمة أو حساسة للأعمال ، أو تعالج الأصول الحساسة الأخرى ، أو الصناعات التي تكون فيها السلامةintegrity  جانبًا مهمًا لحماية أعمالها ، مثل صناعة الألعاب لمكافحة الغش في الألعاب واختراقها.

عادةً ما تكون التهديدات التي تواجه تطبيقات المستوى 2 عبارة عن مهاجمين ماهرين ومتحمسين يركزون على أهداف محددة باستخدام أدوات وتقنيات يتم استخدامها بشكل كبير وفعال في اكتشاف واستغلال نقاط الضعف داخل التطبيقات.

### المستوى 3: قيمة عالية ، أو ضمان عالي ، أو سلامة عالية

المستوى 3 من ASVS هو أعلى مستوى للتحقق داخل ASVS. عادةً ما يكون هذا المستوى مخصص للتطبيقات التي تتطلب مستويات كبيرة من التحقق الأمني ، كالتطبيقات في المجالات العسكرية والصحة والسلامة والبنية التحتية الحيوية وما إلى ذلك.

قد تطلب المنظمات ASVS المستوى 3 للتطبيقات التي تؤدي وظائف مهمة ، حيث يمكن لفشل التطبيق أن يؤثر بشكل كبير على عمليات المنظمة ، وحتى على بقائها. ويرد أدناه مثال على إرشادات حول تطبيق ASVS المستوى 3. يحقق التطبيق المستوى 3 من ASVS (أو المستوى المتقدم) إذا كان يحمي بشكل كاف من الثغرات الأمنية المتقدمة للتطبيقات ويوضح أيضًا مبادئ التصميم الآمن الجيد.

يتطلب التطبيق في المستوى 3 من ASVS تحليلًا معمقًا للبنية وكتابة الشيفرة المصدرية والاختبار أكثر من جميع المستويات الأخرى. يتم نمذجة modularized التطبيق الآمن بطريقة هادفة (لتسهيل المرونة وقابلية التوسع والأهم من ذلك كله ، طبقات الأمان) ، وكل وحدة module (مفصولة عن طريق اتصال الشبكة و / أو كيان فيزيائي) تهتم بمسؤولياتها الأمنية الخاصة (الدفاع في العمق defense in depth) ، التي تحتاج إلى توثيقها بشكل صحيح. تشمل المسؤوليات ضوابط لضمان السرية confidentiality  (مثل التشفير) ، والسلامة integrity (مثل المعاملات transactions ، والتحقق من صحة المدخلات input validation) ، والتوافر availability (مثل التعامل مع الحمل بأمان handling load gracefully) ، والمصادقة authentication  (بما في ذلك بين الأنظمة) ، والتفويض authorization ، والتدقيق auditing (التسجيل logging).

## تطبيق المعيار بشكل عملي

التهديدات المختلفة لها دوافع مختلفة. بعض الصناعات لديها معلومات فريدة وأصول تقنية ومتطلبات الامتثال لقوانين خاصة بنطاق عملها.

يتم تشجيع المؤسسات بشدة على النظر بعمق في خصائص المخاطر الفريدة الخاصة بها بناءً على طبيعة أعمالها ، وبناءً على تلك المخاطر ومتطلبات العمل لتحديد مستوى ASVS المناسب.

## كيفية الرجوع إلى متطلبات  ASVS

يوجد معرف لكل متطلب بالصيغة "<الفصل>.<القسم>.<المتطلب>" حيث كل حقل في هذا المعرف هو رقم ، على سبيل المثال "3.11.1".
- الحقل "<الفصل>" يشير للفصل الذي يتتمي له المتطلب، على سبيل المثال: كل متطلبات "#.#.1" تابعة لفصل المعمارية.
- الحقل "<القسم>" يشير للقسم الذي يتم فيه عرض المتطلب، على سبيل المثال: كل متطلبات "#.11.1" هي قسم معمارية منطق الأعمال في فصل المعمارية.
- الحقل "<المتطلب>" يشير لمتطلب محدد في الفصل والقسم، على سبيل المثال: "3.11.1" هو المتطلب من الإصدار 4.0.3 في هذا المعيار والذي ينص على:

> "تحقق من أن جميع تدفقات منطق الأعمال عالية القيمة ، بما في ذلك المصادقة وإدارة الجلسة والتحكم في الوصول آمنة عند استخدام الـthread  ومقاومة لـ time-of-check and time-of-use race conditions".

قد تتغير المعرفات بين الإصدارات المختلفة من المعيار لذلك يفضل في التقارير والمستندات الأخرى أو الأدوات أن يتم استخدام الصيغة التالية: 
"ن<رقم الإصدار>-<الفصل>.<القسم>.<المتطلب>" ، حيث "<رقم الإصدار>" هو وسم لإصدار ASVS. على سبيل المثال: "ن 4.0.3-1-11-3" هي إشارة واضحة للمتطلب الثالث في معمارية منطق الأعمال في فصل المعمارية من الإصدار 4.0.3. (يمكن اختصار ذلك للصيغة "ن<رقم الإصدار>-<معرف المتطلب>"(. ملاحظات: حرف النون الذي يسبق المعرف هو اختصار كلمة نسخة (المقابل في المعيار الإنجليزي هو حرف v وهو اختصار لكلمة version) وتم الترقيم من اليمين إلى اليسار فالمتطلب الخامس الموجود في القسم الرابع من الفصل الأول هو في النسخة العربية 5.4.1 وفي النسخة الإنكليزية 1.4.5 ، لم يتم تغيير الترتيب وإنما اتجاه الترقيم فقط

ملاحظة: يجب أن تكون الحرف`v` الذي يسبق جزء الإصدار صغير lower case.

إذا لم يتم استخدام حرف النون أو حرف v فهذا يعني أن المعرف يشير للمتطلب الموجود في محتوى آخر إصدار في ASVS. كما يتضح للقارئ أن المعيار ينمو ويتغير وهذا يشكل معضلة، لذلك يجب وضع رقم إصدار ASVS في معرف المتطلب.

إن قائمة متطلبات ASVS متاحة بصيغ مختلفة لدعم الاستخدامات البرمجية كـ CSV و JSON وغيرها من الصيغ المفيدة.
