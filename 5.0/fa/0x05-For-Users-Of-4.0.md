# تغییرات نسبت به نسخه 4.x

## مقدمه

کاربرانی که با نسخه x.4 این استاندارد آشنایی دارند، ممکن است مرور تغییرات کلیدی معرفی‌شده در نسخه 5.0 را مفید بیابند؛ تغییراتی که شامل به‌روزرسانی‌هایی در محتوا، دامنه و فلسفه زیربنایی استاندارد هستند.

از میان ۲۸۶ الزام موجود در نسخه 4.0.3، تنها ۱۱ مورد بدون تغییر باقی مانده‌اند و ۱۵ مورد صرفاً اصلاحات جزئی گرامری داشته‌اند که معنای آن‌ها را تغییر نداده است. در مجموع، ۱۰۹ الزام (معادل ۳۸٪) در نسخه ۵.۰ دیگر به‌صورت الزامات جداگانه وجود ندارند؛ که از این میان، ۵۰ مورد حذف شده‌اند، ۲۸ مورد به‌عنوان موارد تکراری حذف شده‌اند و۳۱ مورد در الزامات دیگر ادغام شده‌اند. مابقی الزامات نیز به‌نوعی مورد بازنگری قرار گرفته‌اند. حتی الزامات تغییریافته‌ای که از لحاظ محتوایی تغییر زیادی نداشته‌اند نیز به‌دلیل بازآرایی یا بازساختاردهی، شناسه‌های متفاوتی دارند.

برای تسهیل پذیرش نسخه 5.0، اسنادی برای نگاشت الزامات ارائه شده‌اند تا به کاربران کمک کنند نحوه تطابق الزامات نسخه x.4 با نسخه 5.0 را دنبال کنند. این نگاشت‌ها به نسخه انتشار خاصی وابسته نیستند و در صورت لزوم به‌روزرسانی یا شفاف‌سازی خواهند شد.

## فلسفه الزامات

### دامنه و تمرکز

در نسخه x.4 الزامات متعددی گنجانده شده بودند که با دامنه مورد نظر این استاندارد هم‌راستا نبودند؛ این موارد حذف شده‌اند. همچنین، الزاماتی که با معیارهای دامنه نسخه ۵.۰ سازگار نبودند یا قابلیت ارزیابی نداشتند نیز کنار گذاشته شده‌اند.

### تمرکز بر اهداف امنیتی به‌جای سازوکارها

در نسخه x.4 بسیاری از الزامات بر سازوکارهای خاصی متمرکز بودند و نه بر اهداف زیربنایی امنیتی. در نسخه ۵.۰، تمرکز الزامات بر اهداف امنیتی است و تنها در مواردی که یک سازوکار خاص تنها راه‌حل عملی است، به آن اشاره شده یا به‌عنوان نمونه یا راهنمایی مکمل آورده شده است.

 این رویکرد به رسمیت می‌شناسد که روش‌های متعددی ممکن است برای رسیدن به یک هدف امنیتی وجود داشته باشند و از تجویزهای غیرضروری که می‌تواند انعطاف‌پذیری سازمان‌ها را محدود کند، اجتناب می‌کند.

همچنین، الزامات مرتبط با یک دغدغه امنیتی واحد، در صورت لزوم با هم ادغام شده‌اند.

### تصمیمات امنیتی مستند

هرچند مفهوم تصمیمات امنیتی مستند ممکن است در نسخه 5.0 جدید به‌نظر برسد، در واقع ادامه و تکامل الزاماتی در نسخه 4.0 است که به تحلیل سیاست‌ها و مدل‌سازی تهدید اشاره داشتند. در گذشته، برخی الزامات به‌طور ضمنی نیازمند تحلیل برای پیاده‌سازی کنترل‌های امنیتی بودند، مانند تعیین اتصالات شبکه مجاز.

به‌منظور اطمینان از در دسترس بودن اطلاعات لازم برای اجرا و ارزیابی، این انتظارات اکنون به‌طور صریح به‌عنوان الزامات مستندسازی تعریف شده‌اند تا شفاف، قابل اجرا و قابل ارزیابی باشند.

## تغییرات ساختاری و فصل‌های جدید

چند فصل در نسخه ۵.۰ محتوای کاملاً جدیدی را معرفی کرده‌اند:

* OAuth وOIDC: با توجه به رواج گسترده این پروتکل‌ها برای واگذاری دسترسی و ورود یکپارچه (SSO)، الزامات اختصاصی برای این حوزه تعریف شده‌اند تا سناریوهای متنوعی که توسعه‌دهندگان ممکن است با آن‌ها مواجه شوند، پوشش داده شود. این حوزه ممکن است در آینده به استانداردی مستقل تبدیل شود(مشابه آنچه برای حوزه موبایل و IoT در نسخه‌های قبلی رخ داد).
* WebRTC: با توجه به رشد سریع این فناوری، ملاحظات و چالش‌های امنیتی خاص آن اکنون در بخشی اختصاصی پوشش داده شده‌اند.

همچنین، تلاش شده ساختار فصل‌ها به‌گونه‌ای تنظیم شود که مجموعه‌های منسجم و مرتبطی از الزامات را در کنار هم قرار دهد.

این بازسازمان‌دهی منجر به ایجاد فصل‌های جدیدی نیز شده است:

* توکن‌های مستقل(Self-contained Tokens): که پیش‌تر زیرمجموعه مدیریت نشست بودند، اکنون به‌عنوان یک سازوکار مستقل شناخته می‌شوند و یکی از عناصر بنیادی در ارتباطات بدون وضعیت (stateless) مانند OAuth و OIDC به‌شمار می‌روند. به‌دلیل پیامدهای امنیتی خاص این نوع توکن‌ها، در نسخهx.5 یک فصل اختصاصی به آن‌ها اختصاص داده شده و برخی الزامات جدید نیز در این زمینه معرفی شده‌اند.
* امنیت فرانت‌اند وب: با توجه به پیچیدگی فزاینده برنامه‌های تحت مرورگر و معماری‌های مبتنی بر API، الزامات امنیتی فرانت‌اند به فصل مستقلی منتقل شده‌اند.
*  کدنویسی و معماری ایمن: الزاماتی که به شیوه‌های کلی امنیت مربوط می‌شدند ولی در فصل‌های قبلی جای نمی‌گرفتند، در این بخش جمع‌آوری شده‌اند.

سایر تغییرات ساختاری در نسخه ۵.۰ به‌منظور شفاف‌سازی مقصود اعمال شده‌اند. برای مثال، الزامات مربوط به اعتبارسنجی ورودی به‌جای قرارگیری در کنار پاک‌سازی و کدگذاری، در کنار منطق تجاری قرار داده شده‌اند تا نقش آن‌ها در اجرای قوانین تجاری را بهتر نشان دهند.

فصل قبلی با عنوان معماری V1  به‌طور کامل حذف شده است. بخش ابتدایی آن شامل الزاماتی بود که خارج از محدوده موضوعی قرار داشتند، در حالی که بخش‌های بعدی به فصل‌های مرتبط منتقل شده‌اند و الزامات نیز در صورت لزوم بازنگری، شفاف‌سازی و حذف موارد تکراری شده‌اند.

## حذف نگاشت مستقیم با استانداردهای دیگر

نگاشت مستقیم با استانداردهای دیگر از متن اصلی استاندارد حذف شده است. هدف آن است که نگاشتی با پروژه OWASP CRE (Common Requirement Enumeration) ارائه شود که به‌نوبه خود ASVS را به طیفی از پروژه‌های OWASP و استانداردهای خارجی متصل کند.

نگاشت مستقیم با CWE و NIST دیگر حفظ نمی‌شود، که در ادامه توضیح داده شده است.

### کاهش وابستگی به دستورالعمل‌های هویت دیجیتال NIST

دستورالعمل‌های هویت دیجیتال [Digital Identity Guidelines (SP 800-63)](https://pages.nist.gov/800-63-3/) مدت‌ها به‌عنوان مرجع برای کنترل‌های احراز هویت و مجوزدهی استفاده می‌شدند. در نسخه x.4 برخی فصل‌ها با ساختار و واژگان NIST هم‌راستا بودند.

با آن‌که این دستورالعمل‌ها همچنان مرجع مهمی محسوب می‌شوند، این هم‌راستایی سختگیرانه چالش‌هایی ایجاد کرده بود؛ از جمله واژگان کمتر شناخته‌شده، تکرار الزامات مشابه، و نگاشت‌های ناقص. نسخه 5.0 از این رویکرد فاصله گرفته تا وضوح و ارتباط مؤثرتر را ارتقا دهد.

### فاصله گرفتن از نگاشت CWE

[Common Weakness Enumeration (CWE)](https://cwe.mitre.org/) طبقه‌بندی مفیدی از ضعف‌های امنیتی نرم‌افزار ارائه می‌دهد. با این حال، چالش‌هایی مانند CWEهایی که فقط شامل دسته‌بندی هستند، دشواری در نگاشت دقیق الزامات به یک CWE خاص، و نگاشت‌های نامشخص در نسخه x.4 باعث شد تصمیم گرفته شود که در نسخه ۵.۰ نگاشت مستقیم با CWE  حذف شود.

## بازنگری در تعریف سطوح (Levels)

نسخه x.4 سطوح امنیتی را به‌صورت L1 ("حداقلی")، L2  ("استاندارد") و L3 ("پیشرفته") تعریف می‌کرد و تلویحاً بیان می‌کرد که تمام برنامه‌هایی که با داده‌های حساس سروکار دارند باید حداقل به سطح L2 برسند.

نسخه ۵.۰ به چندین ایراد در این رویکرد پرداخته است که در پاراگراف‌های ذیل آمده است:

از لحاظ عملی برخلاف نسخه x.4 که از علامت تیک (✔) برای نمایش سطح استفاده می‌کرد، نسخه x.5 از عدد ساده در تمام قالب‌های سند (شامل markdown، PDF، DOCX، CSV،JSON  و  XML) استفاده می‌کند. برای حفظ سازگاری با نسخه‌های قبلی، خروجی‌های قدیمی CSV،JSON  و XML با علامت تیک نیز تولید می‌شوند.

### ورود ساده‌تر به سطح اول

بازخوردها نشان دادند که تعداد بالای الزامات سطح اول (120 مورد) و این‌که این سطح به‌عنوان حداقل اما ناکافی معرفی شده بود، موجب کاهش تمایل به استفاده می‌شد. نسخه ۵.۰ تلاش کرده این مانع را با تعریف سطح L1 حول الزامات لایه اول دفاعی کاهش دهد؛ نتیجه این کار الزامات کمتر و روشن‌تر در این سطح است. برای مقایسه عددی: در نسخه 4.0.3 تعداد ۱۲۸ الزام L1 از مجموع ۲۷۸ (معادل ۴۶٪) وجود داشت، اما در نسخه 5.0.0 این تعداد به ۷۰ الزام از مجموع ۳۴۵ (معادل ۲۰٪) کاهش یافته است.

### افسانه قابلیت آزمون‌پذیری

در نسخه x.4 یکی از معیارهای اصلی انتخاب الزامات سطح ۱، قابلیت ارزیابی آن‌ها از طریق تست نفوذ خارجی به‌صورت "جعبه سیاه" بود. اما این رویکرد با هدف واقعی سطح ۱ (حداقل کنترل‌های امنیتی) همخوانی کامل نداشت. برخی کاربران معتقد بودند سطح ۱ برای تأمین امنیت کافی نیست، و برخی دیگر آن را بیش از حد سخت برای آزمون تلقی می‌کردند.

 اتکا به قابلیت آزمون‌پذیری به‌عنوان معیار، رویکردی نسبی و گاه گمراه‌کننده است؛ چرا که آزمون‌پذیر بودن الزام لزوماً به معنای سهولت یا امکان خودکارسازی آزمون آن نیست. همچنین الزامات آسان‌تر برای آزمون لزوماً پراثرترین یا آسان‌ترین گزینه‌ها برای اجرا نیستند.

بنابراین در نسخه ۵.۰، تصمیم‌گیری در مورد سطوح عمدتاً بر اساس کاهش ریسک انجام شده و میزان تلاش موردنیاز برای پیاده‌سازی نیز در نظر گرفته شده است.

### فقط ریسک مطرح نیست

استفاده از سطوح نسخه‌ای و مبتنی بر ریسک که الزام سطح خاصی را برای برنامه‌ها تجویز می‌کنند، در عمل بیش از حد خشک و انعطاف‌ناپذیر بوده است. در واقع، اولویت‌بندی و پیاده‌سازی کنترل‌های امنیتی به عوامل متعددی بستگی دارد، از جمله کاهش ریسک و میزان تلاش اجرایی.

 بنابراین توصیه می‌شود سازمان‌ها سطحی از ASVS را انتخاب کنند که متناسب با بلوغ امنیتی آن‌ها و پیامی که می‌خواهند به کاربران خود منتقل کنند، باشد.
