# V13 설정

## 제어 목표

인터넷상에서 사용하기 위해 애플리케이션의 기본 설정은 안전해야 한다.

이 챕터에서는 이를 달성하기 위해 개발, 빌드, 배포 과정에서 적용되는 설정들을 비롯한 여러 설정에 대한 가이던스를 제공한다. 

이 주제는 데이터 유출 방지, 컴포넌트 간의 안전한 의사소통, 비밀 정보 보호 등을 다룬다.

## V13.1 설정 문서

이 섹션은 서비스 비접근성으로 인한 가용성 손실을 방지하는 기술을 포함하여, 애플리케이션이 내부, 외부 서비스와 통신을 하기 위한 요구사항들의 문서화에 대해 간략히 서술하고 있다. 또한 비밀 정보와 관련된 문서화에 대해서도 다루고 있다.

| # | 설명 | 수준 |
| :---: | :--- | :---: |
| **13.1.1** | 애플리케이션의 모든 통신 요구사항이 문서화 되어 있는지를 검증한다. 이는 애플리케이션이 의존하는 외부 서비스나, 사용자가 애플리케이션이 연결할 외부 위치를 제공하는 경우들을 포함한다. | 2 |
| **13.1.2** | 애플리케이션이 사용하는 각각의 서비스들에 대해, 문서가 최대 동시 연결 수(연결 풀 제한)를 정의하고 있는지, 그리고 그 한계에 다다랐을 때 폴백(fallback)이나 복구 메커니즘 등을 포함하여, DoS 공격을 방지하기 위해 애플리케이션이 어떻게 동작하는지를 검증한다. | 3 |
| **13.1.3** | 애플리케이션 문서가 모든 외부 시스템이나 애플리케이션이 사용하는 서비스(예시: 데이터베이스, 파일 핸들, 스레드, HTTP 연결)들에 대한 자원-관리 전략을 정의하고 있는지 검증한다.이는 자원-해제 프로시저, 시간초과 설정, 오류 핸들링을 포함하며, 재시도 로직이 구현된 경우 재시도 제한과 지연, 백-오프 알고리즘을 명시해야 한다. 동기 HTTP 요청-응답 명령에 대해서는 짧은 타임아웃에 더해 재시도의 비활성화 혹은 연쇄적인 지연과 자원 고갈을 방지하기 위한 재시도의 엄격한 제한을 의무화해야 한다. | 3 |
| **13.1.4** | 애플리케이션 문서가 조직의 위협 모델과 사업적 요구사항에 기반하여, 애플리케이션의 보안과 비밀 정보들의 주기적 갱신 일정에 치명적인 비밀 정보들을 정의하고 있는지 검증한다. | 3 |

## V13.2 백엔드 통신 설정

애플리케이션들은 여러 API, 데이터베이스 또는 다른 컴포넌트 등과 함께 상호작용한다. 이것들은 애플리케이션의 표준 접근 제어 메커니즘에 포함되어 있기보다 애플리케이션 내부에 존재한다고 고려되거나, 혹은 완전 외부에 존재한다고 여겨진다. 각각의 경우 모두 이 컴포넌트들과 안전하게 상호작용하고, 또 유사시 그 설정을 보호하는 도록 애플리케이션을 설정하는 것이 필수적이다.

참고: “안전한 통신” 챕터는 전송의 암호화를 위한 가이던스를 제공한다.

| # | 설명 | 수준 |
| :---: | :--- | :---: |
| **13.2.1** | API나 미들웨어와 같은 애플리케이션의 표준 사용자 세션 메커니즘을 지원하지 않는 백엔드 애플리케이션 컴포넌트와 데이터 계층 사이의 통신이 인증되어 있는지를 검증한다. 인증은 반드시 개별적인 서비스 계정과 단기간 토큰, 또는 인증서 기반 인증을 사용하고 비밀번호, API 키, 또는 접근 권한이 부여된 공유 계정 등의 자격 증명을 변경하지 않아선 안 된다.  | 2 |
| **13.2.2** | 로컬 또는 운영체제 서비스, API, 미들웨어, 그리고 데이터 계층을 포함한 백엔드 애플리케이션 컴포넌트 간의 통신이 최소 필요 권한이 할당된 계정들로 수행되는지 검증한다. | 2 |
| **13.2.3** | 만약 자격 증명이 서비스 인증을 위해 필요하다면, 소비자로부터 사용되는 그 자격 증명이 기본 자격 증명이 아님을 검증한다. (예시: root/root 또는 admin/admin) | 2 |
| **13.2.4** | 얼로우리스트가 애플리케이션의 통신이 허가된 외부 리소스나 시스템을 정의하기 위해 사용되는지 검증한다. (예시: 아웃바운드 요청, 데이터 로드, 파일 접근). 이 얼로우리스트는 애플리케이션 계층, 웹 서버, 방화벽 또는 다른 여러 계층의 조합으로 구현할 수 있다.   | 2 |
| **13.2.5** | 웹이나 애플리케이션 서버에 요청을 보내거나 데이터나 파일을 로드 할 수 있는  리소스 또는 시스템의 얼로우리스트가 설정되어 있는지를 검증한다. | 2 |
| **13.2.6** | 애플리케이션이 별도의 서비스와 연결할 때, 각 연결이 최대 병렬연결, 최대 연결 도달 시의 동작, 연결 타임아웃, 재시도 전략 등 문서화된 설정에 따르는지 검증한다. | 3 |

## V13.3 비밀 정보 관리

비밀 정보 관리는 애플리케이션에서 사용되는 데이터를 보호하기 위해 필수적인 설정이다. 암호에 대한 특정 요구사항들은 “암호” 챕터에서 찾아볼 수 있고, 이 섹션에서는 비밀 정보들의 관리와 취급의 측면에 초점을 둔다.

| # | 설명 | 수준 |
| :---: | :--- | :---: |
| **13.3.1** | 키 볼트와 같은 비밀 정보 관리 솔루션이 백엔드 비밀 정보들을 만들고 저장하고, 접근을 제어하고, 파기하기 위해 사용되고 있는지 검증한다. 이는 비밀번호, 키 재료, 데이터베이스와 서드 파티 시스템의 통합, 시간-기반 토큰을 위한 키와 시드, 그리고 API 키들을 포함할 수 있다. 비밀 정보들은 애플리케이션 소스 코드 내부나, 빌드 아티팩트에 포함되어서는 안 된다. L3 애플리케이션에 대해서는, 반드시 HSM과 같은 하드웨어 기반 솔루션을 사용해야 한다. | 2 |
| **13.3.2** | 비밀 정보 자원들에 대한 접근이 최소 권한의 원칙을 고수하는지 검증한다. | 2 |
| **13.3.3** | 보안 모듈에 대한 외부의 노출로부터 안전하게 키 재료를 관리하고 보호하기 위해 모든 암호 연산이 고립된 보안 모듈(볼트나, 하드웨어 보안 모듈 등)을 사용하여 수행되는지 검증한다. | 3 |
| **13.3.4** | 애플리케이션의 문서를 기반으로 비밀 정보들이 만료되고 갱신되도록 설정되었는지 검증한다. | 3 |

## V13.4 의도하지 않은 정보 노출

운영환경 설정은 불필요한 데이터가 공개되는 것을 피하기 위해 강화되어야 한다. 의도하지 않은 정보의 노출은 심각한 위협으로 평가되지는 않지만 자주 다른 취약점들과 연계된다. 이러한 문제들이 기본적으로 존재하지 않으면 애플리케이션에 대한 공격 난이도를 높일 수 있다.

예를 들어 서버단 컴포넌트의 버전 정보를 숨긴다고 해서 모든 컴포넌트를 패치할 필요가 없어지는 것은 아니지만, 또 폴더 목록 보기를 비활성화한다고 인증 제어를 사용하거나 공용 폴더로부터 파일을 제거할 필요가 없어지는 것은 아니지만, 이는 공격의 난이도를 높인다.

| # | 설명 | 수준 |
| :---: | :--- | :---: |
| **13.4.1** | 애플리케이션이 .git 이나 .svn 폴더 같은 소스 코드 관리 메타데이터 없이 배포되었는지, 또는 이 폴더들이 외부적으로든 애플리케이션 자체에서든 접근할 수 없도록 배포되었는지 검증한다.  | 1 |
| **13.4.2** | 실제 운영환경에서 디버깅 기능 노출이나 정보 누출을 방지하기 위해, 모든 컴포넌트에서 디버그 모드가 비활성화되어 있는지 검증한다. | 2 |
| **13.4.3** | 분명히 의도된 것이 아닌 이상 웹 서버가 폴더 목록을 클라이언트에게 노출하지 않는지 검증한다. | 2 |
| **13.4.4** | 잠재적인 정보 누출을 방지하기 위해 실제 운영환경에서 HTTP TRACE 메소드 사용이 지원되지 않는지 검증한다.  | 2 |
| **13.4.5** | 분명히 의도된 것이 아닌 이상 문서(내부 API 같은)와 모니터링 엔드포인트가 노출되지 않는지 검증한다. | 2 |
| **13.4.6** | 애플리케이션이 백엔드 컴포넌트의 자세한 버전 정보를 노출하지 않는지 검증한다. | 3 |
| **13.4.7** | 웹 계층이 의도적이지 않은 정보, 설정, 소스코드 누출을 방지하기 위해 특정 파일 확장자만 서비스하도록 설정되었는지 검증한다. | 3 |

## 참조

더 많은 정보를 위해 아래를 참조:

* [OWASP Web Security Testing Guide: Configuration and Deployment Management Testing](https://owasp.org/www-project-web-security-testing-guide/stable/4-Web_Application_Security_Testing/02-Configuration_and_Deployment_Management_Testing)
